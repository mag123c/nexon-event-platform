#!/bin/bash

current_branch=$(git rev-parse --abbrev-ref HEAD)

echo "ğŸ” Pre-commit Hook: Running lint checks..."
if yarn lint-staged; then
  echo "âœ… Lint checks passed."
else
  echo "âŒ Lint checks failed. Aborting commit."
  exit 1
fi

if [[ "$current_branch" == "main" ]]; then
  echo "ğŸ” Pre-commit Hook: Running test checks on branch [$current_branch]..."
  if yarn test; then
    echo "âœ… Test checks passed."
  else
    echo "âŒ Test checks failed. Aborting commit."
    exit 1
  fi
else
  echo "ğŸŸ¡ Skipping tests on branch [$current_branch]."
fi